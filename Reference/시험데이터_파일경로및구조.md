
**실제 데이터는 로컬환경에는 없다. 다른 PC환경에 있기 때문에, 코드 검증은 다른 PC환경에서 진행할 예정이다..**


- data_path를 입력받도록 한다.
- data_path에는 배터리 정보가 있으니, 추출하도록 시도하자.

- 아래는 예시이므로 범용적으로 사용할 수 있는 코드 기능 구현 필요

data_path 예시

"D:\\pne\LGES_G3_MP1_4352mAh_상온수명"
"D://pne/LGES_G3_MP1_4352mAh_상온수명"
"D:\\pne\LGES_G3_MP1_4352mAh_상온수명"
D:\\pne\LGES_G3_MP1_4352mAh_상온수명
D://pne/LGES_G3_MP1_4352mAh_상온수명
D:\\pne\LGES_G3_MP1_4352mAh_상온수명

- 각 경로 아래는 배터리 충방전 raw data가 있음
- Toyo1, Toyo2, PNE (배터리 충방전기 회사)
- 각 회사별로 raw 데이터 형식이 다름.

# Toyo1
- 각 채널별(86, 93, ...) 데이터 수집
- 000001~ : 데이터 로드 후 병합 저장
- CAPACITY.LOG : 데이터 로드 저장
## 경로
data_path/
├── 93/
│   ├── 000001
│   ├── 000002
│   ├── ...
│   └── CAPACITY.LOG
├── 86/
└── ...

## 파일 구조 
예시 파일은 Toyo폴더 참고 (데이터 일부만 에시로 기재해놓음)

# Toyo 장비 데이터 구조 (Toyo1 & Toyo2)

각 채널별(86, 93, ...) 데이터 수집
- 000001~ : 순차적 번호 파일 (모든 파일 로드하여 병합)
- CAPACITY.LOG : 용량 요약 데이터

## 📁 디렉토리 구조

```
data_path/
├── 93/                           # 채널 93번
│   ├── 000001                    # Raw 데이터 파일 1
│   ├── 000002                    # Raw 데이터 파일 2
│   ├── 000003                    # Raw 데이터 파일 3
│   ├── ...                       # 연속된 번호 파일들
│   ├── 000050                    # Raw 데이터 파일 50 (예시)
│   └── CAPACITY.LOG              # 용량 요약 로그
├── 86/                           # 채널 86번 (동일 구조)
│   ├── 000001
│   ├── 000002
│   ├── ...
│   └── CAPACITY.LOG
└── ...                           # 추가 채널들
```

## 📊 파일별 상세 설명

### 000001, 000002, ... (Raw 데이터)
- **형식**: CSV 형식, 헤더 포함
- **인코딩**: UTF-8
- **내용**: 실시간 배터리 테스트 측정값
- **처리**: 모든 연번 파일을 시간순 병합 → `raw_data.csv` 출력
- **특징**: 파일 내 Unnamed 컬럼들이 포함될 수 있어 제거 필요

### CAPACITY.LOG (용량 요약)
- **형식**: CSV 형식, 헤더 포함
- **인코딩**: UTF-8
- **내용**: 사이클별 충방전 용량 요약 정보
- **처리**: 그대로 로드 → `capacity_log.csv` 출력
- **특징**: 배터리 수명 분석의 핵심 데이터

## 🔄 처리 방식

### Toyo 전용 출력 형식
**채널별로 2개 파일씩 분리 출력**:
1. `{배터리정보}_{채널명}_raw_data.csv` - 모든 Raw 데이터 병합
2. `{배터리정보}_{채널명}_capacity_log.csv` - 용량 로그 데이터

### 처리 순서
1. 채널 폴더 검색 (숫자 폴더명)
2. 각 채널별로 000001~ 파일들 모두 로드
3. Unnamed 컬럼 제거 후 병합
4. CAPACITY.LOG 별도 로드
5. 채널별로 2개 파일 분리 출력

# PNE 장비 데이터 구조

각 채널별(M01Ch003[003], M01Ch004[004], ...) 데이터 수집
Restore 폴더 내 데이터 로드 후 병합 필요

## 📁 디렉토리 구조

```
data_path/
├── M01Ch003[003]/              # 채널 3번
│   ├── Restore/                # 실제 데이터 폴더
│   │   ├── ch03_SaveData0001.csv    # 측정 데이터 파일 1
│   │   ├── ch03_SaveData0002.csv    # 측정 데이터 파일 2
│   │   ├── ...                      # 중간 파일들
│   │   ├── ch03_SaveEndData.csv     # 마지막 데이터 파일
│   │   ├── savingFileIndex_start.csv # 시작 파일 인덱스
│   │   └── savingFileIndex_last.csv  # 종료 파일 인덱스
│   └── [기타 설정 파일들...]
├── M01Ch004[004]/              # 채널 4번 (동일 구조)
├── M01Ch005[005]/              # 채널 5번 (동일 구조)
├── ...                         # 추가 채널들
└── Pattern/                    # 테스트 패턴 설정 파일들
```

## 📊 파일별 상세 설명

### ch03_SaveData0001.csv (측정 데이터)
- **형식**: 탭 구분 CSV 파일, 헤더 없음
- **컬럼 수**: 46개 (또는 47개)
- **데이터**: 실시간 배터리 테스트 측정값
- **처리**: 모든 SaveData 파일을 시간순 병합

**46개 컬럼 정보**:
```
0:  Index                    - 데이터 순번
1:  Default                  - 기본값(2)
2:  Step_Type                - 단계 종류 (1:충전, 2:방전, 3:휴지, 4:OCV, 5:Impedance, 8:loop)
3:  ChgDchg                  - 충방전 모드 (1:CV, 2:CC, 255:rest)
4:  Current_App_Class        - 전류 적용 분류 (1:전류 비인가 직전, 2:전류인가)
5:  CCCV                     - 충전 모드 (0:CC, 1:CV)
6:  End_State                - 종료 상태 (0:패턴시작, 64:휴지, 65:CC, 66:CV, 69:패턴종료, 78:용량)
7:  Step_Count               - 스텝 카운트
8:  Voltage_uV               - 전압 (마이크로볼트)
9:  Current_uA               - 전류 (마이크로암페어)
10: Chg_Capacity_uAh         - 충전 용량 (마이크로암페어시)
11: Dchg_Capacity_uAh        - 방전 용량 (마이크로암페어시)
12: Chg_Power_mW             - 충전 전력 (밀리와트)
13: Dchg_Power_mW            - 방전 전력 (밀리와트)
14: Chg_WattHour_Wh          - 충전 에너지 (와트시)
15: Dchg_WattHour_Wh         - 방전 에너지 (와트시)
16: Repeat_Pattern_Count     - 반복 패턴 카운트 (0, 1, 2, ...)
17: Step_Time_cs             - 스텝 시간 (1/100초)
18: Tot_Time_day             - 총 시간 (일)
19: Tot_Time_cs              - 총 시간 (1/100초)
20: Impedance                - 임피던스
21-24: Temperature_1~4       - 온도 센서 1~4
25: Unknown_25               - 미지값 (2 또는 0)
26: Repeat_Count             - 반복 횟수
27: Total_Cycle              - 총 사이클
28: Current_Cycle            - 현재 사이클
29: Avg_Voltage_uV           - 평균 전압 (마이크로볼트)
30: Avg_Current_uA           - 평균 전류 (마이크로암페어)
31: Col_31                   - 예약된 컬럼
32: CV_Section               - CV 구간
33: Date_YYYYMMDD            - 날짜 (YYYY/MM/DD)
34: Time_HHmmss              - 시간 (HH/mm/ss.ss)
35-37: Col_35~37             - 예약된 컬럼
38: Step_Info                - 스텝별 정보
39: CC_Charge                - CC 충전 정보
40: CV_Section_2             - CV 구간 2
41: Discharge                - 방전 정보
42: Col_42                   - 예약된 컬럼
43: Avg_Voltage_Section      - 구간별 평균 전압
44: Cumulative_Step          - 누적 스텝
45: Voltage_Max_uV           - 최대 전압 (마이크로볼트)
46: Voltage_Min_uV           - 최소 전압 (마이크로볼트)
```

### savingFileIndex_start.csv (시작 인덱스)
- **형식**: 헤더 없는 텍스트 파일
- **내용**: 각 SaveData 파일의 시작 정보
- **구조**: `fileIndex [번호] resultIndex [행번호] open_year [년] open_month [월] open_day [일]`

### savingFileIndex_last.csv (종료 인덱스)
- **형식**: 헤더 없는 텍스트 파일
- **내용**: 마지막 SaveData 파일의 종료 정보
- **구조**: 시작 인덱스와 동일 형식
